// Generated by IcedCoffeeScript 108.0.9
(function() {
  var MESSAGES, Websocket, send, ws, _;

  _ = require('wegweg')({
    globals: true
  });

  MESSAGES = {
    QUERY_LAST: 0,
    QUERY_ALL: 1,
    BLOCKCHAIN_RESPONSE: 2
  };

  Websocket = require('ws');

  ws = new Websocket('ws://localhost:11001');

  send = (function(ws, obj) {
    log(/sending message/, obj);
    return ws.send(JSON.stringify(obj));
  });

  ws.on('open', function() {
    return send(ws, {
      type: MESSAGES.QUERY_LAST
    });
  });

  ws.on('message', function(msg) {
    log(/websocket message/);
    return log(msg);
  });

  ws.on('close', function() {
    return log(/websocket closed/);
  });

  ws.on('error', function() {
    return log(/websocket error/);
  });

}).call(this);
